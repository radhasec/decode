(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{4841:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/graphic/colorblind",function(){return n(9076)}])},9076:function(t,e,n){"use strict";n.r(e);var a=n(5893),o=n(7294),i=n(1132),l=n(9216),r=n(4361),c=n(5317),u={protanopia:[[.202001295331,.991720719265,-.193722014597],[.163800203026,.792663865514,.0435359314602],[.00913336570448,-.0132684300993,1.00413506439]],deuteranopia:[[.430749076295,.717402505462,-.148151581757],[.336582831043,.574447762213,.0889694067435],[-.0236572929497,.0275635332006,.996093759749]],tritanopia:[[.971710712275,.112392320487,-.0841030327623],[.0219508442818,.817739672383,.160309483335],[-.0628595877201,.880724870686,.182134717034]],monochromacy:[[.299,.587,.114],[.299,.587,.114],[.299,.587,.114]]},s=function(t){var e=t.contents,n=void 0===e?"":e,i=t.type,l=void 0===i?null:i,r=(t.amount,t.title),c=void 0===r?"":r,s=(0,o.useRef)(null),d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(void 0!==t&&null!==t&&e.length>0){var n=new Image;n.onload=function(){if(t.canvas.width=n.width,t.canvas.height=n.height,t.drawImage(n,0,0),null!==l&&Object.keys(u).includes(l)){for(var e=t.getImageData(0,0,n.width,n.height).data,a=[],o=u[l],i=0;i<e.length;i+=4)a.push(o[0][0]*e[i]+o[0][1]*e[i+1]+o[0][2]*e[i+2],o[1][0]*e[i]+o[1][1]*e[i+1]+o[1][2]*e[i+2],o[2][0]*e[i]+o[2][1]*e[i+1]+o[2][2]*e[i+2],e[i+3]);t.putImageData(new ImageData(new Uint8ClampedArray(a),n.width,n.height),0,0)}},n.src=e}};return(0,o.useEffect)((function(){var t;d(null===(t=s.current)||void 0===t?void 0:t.getContext("2d"),n)}),[d,n]),(0,a.jsx)("canvas",{ref:s,title:c,className:"max-w-full"})};e.default=function(){var t=(0,o.useState)("protanopia"),e=t[0],n=t[1],u=(0,o.useState)(100),d=u[0],f=(u[1],{blob:"",name:""}),m=(0,o.useState)(f),h=m[0],p=m[1];return(0,a.jsxs)(i.Z,{title:"Color Blindness Simulator",children:[(0,a.jsx)(l.Z,{type:"config",items:[{icon:c._VZ,name:"Color Blindness Type",control:(0,a.jsx)(r.Ph,{value:e,options:[{key:"protanopia",value:"Protanopia"},{key:"deuteranopia",value:"Deuteranopia"},{key:"tritanopia",value:"Tritanopia"},{key:"monochromacy",value:"Monochromacy (rare)"}],onChange:function(t){return n(t.target.value)}})}]}),(0,a.jsx)(l.Z,{body:(0,a.jsx)(r.b8,{accept:"image/*",readAs:"objectURL",multiple:!1,cb:function(t,e){return p({blob:t,name:e.name})}})}),(0,a.jsxs)("div",{className:"\n\t\t\t\t\tgrow\n\t\t\t\t\tflex\n\t\t\t\t\tflex-col\n\t\t\t\t\tmd:flex-row\n\t\t\t\t\tlg:flex-col\n\t\t\t\t\txl:flex-row\n\n\t\t\t\t\titems-stretch\n\t\t\t\t\tgap-6\n\t\t\t\t\t".concat(0===h.blob.length?"hidden":"","\n\t\t\t\t"),children:[(0,a.jsx)(l.Z,{title:"Original",controls:[{type:"clear",onClick:function(){return p(f)}}],body:(0,a.jsx)(s,{contents:h.blob,title:"Original, unaltered image"}),className:"grow flex flex-col basis-1/2 !m-0"}),(0,a.jsx)(l.Z,{title:"Simulated",controls:(0,a.jsx)(r.zx,{hint:"Save",icon:c.OGU,onClick:function(){return function(t,e){var n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(h.blob,function(t,e){return t.slice(0,t.lastIndexOf("."))+"_"+e+t.slice(t.lastIndexOf("."))}(h.name,e))}}),body:(0,a.jsx)(s,{contents:h.blob,type:e,amount:d,title:"Image altered to simulate ".concat(d,"% ").concat(e)}),className:"grow flex flex-col basis-1/2 !m-0"})]})]})}}},function(t){t.O(0,[7702,3534,9922,7278,9774,2888,179],(function(){return e=4841,t(t.s=e);var e}));var e=t.O();_N_E=e}]);